(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{0:function(e,r,a){a("GcxT"),e.exports=a("nOHt")},"1TCz":function(e,r,a){"use strict";a.r(r);var t=a("q1tI"),n=a.n(t),o=a("o0o1"),c=a.n(o),u=a("HaE+"),s=a("8JUI");function i(e,r,a){return r in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a,e}function p(e,r){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),a.push.apply(a,t)}return a}function l(e){for(var r=1;r<arguments.length;r++){var a=null!=arguments[r]?arguments[r]:{};r%2?p(Object(a),!0).forEach((function(r){i(e,r,a[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):p(Object(a)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))}))}return e}var d=function(e,r){switch(r.type){case"REGISTRO_EXITOSO":case"REGISTRO_ERROR":case"LOGIN_ERROR":return l(l({},e),{},{mensaje:r.payload});case"LOGIN_EXITOSO":return localStorage.setItem("token",r.payload),l(l({},e),{},{token:r.payload,autenticado:!0});case"OCULTAR_ALERTA":return l(l({},e),{},{mensaje:null});case"USUARIO_AUTENTICADO":return l(l({},e),{},{usuario:r.payload,autenticado:!0});case"CERRAR_SESION":return localStorage.removeItem("token"),l(l({},e),{},{usuario:null,token:null,autenticado:null});default:return e}},O=a("DJ7r"),R=function(e){e?O.a.defaults.headers.common.Authorization="Bearer ".concat(e):delete O.a.defaults.headers.common.Authorization},f=n.a.createElement,y=function(e){var r=e.children,a={token:localStorage.getItem("token"),autenticado:null,usuario:null,mensaje:null,cargando:null},n=Object(t.useReducer)(d,a),o=n[0],i=n[1],p=function(){var e=Object(u.a)(c.a.mark((function e(r){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.a.post("/api/usuarios",r);case 3:a=e.sent,i({type:"REGISTRO_EXITOSO",payload:a.data.msg}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),i({type:"REGISTRO_ERROR",payload:e.t0.response.data.msg});case 10:setTimeout((function(){i({type:"OCULTAR_ALERTA"})}),3e3);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(r){return e.apply(this,arguments)}}(),l=function(){var e=Object(u.a)(c.a.mark((function e(r){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.a.post("/api/auth",r);case 3:a=e.sent,i({type:"LOGIN_EXITOSO",payload:a.data.token}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),i({type:"LOGIN_ERROR",payload:e.t0.response.data.msg});case 10:setTimeout((function(){i({type:"OCULTAR_ALERTA"})}),3e3);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(r){return e.apply(this,arguments)}}(),y=function(){var e=Object(u.a)(c.a.mark((function e(){var r,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=localStorage.getItem("token"))&&R(r),e.prev=2,e.next=5,O.a.get("/api/auth");case 5:(a=e.sent).data.usuario&&i({type:"USUARIO_AUTENTICADO",payload:a.data.usuario}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),i({type:"LOGIN_ERROR",payload:e.t0.response.data.msg});case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}}();return f(s.a.Provider,{value:{token:o.token,autenticado:o.autenticado,usuario:o.usuario,mensaje:o.mensaje,cargando:o.cargando,registrarUsuario:p,iniciarSesion:l,usuarioAutenticado:y,cerrarSesion:function(){i({type:"CERRAR_SESION"})}}},r)},b=a("9Iqy");function m(e,r){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),a.push.apply(a,t)}return a}function g(e){for(var r=1;r<arguments.length;r++){var a=null!=arguments[r]?arguments[r]:{};r%2?m(Object(a),!0).forEach((function(r){i(e,r,a[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):m(Object(a)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))}))}return e}var _=function(e,r){switch(r.type){case"MOSTRAR_ALERTA":return g(g({},e),{},{mensaje_archivo:r.payload});case"OCULTAR_ALERTA":return g(g({},e),{},{mensaje_archivo:null});case"SUBIR_ARCHIVO":return g(g({},e),{},{cargando:!0});case"SUBIR_ARCHIVO_EXITO":return g(g({},e),{},{nombre:r.payload.nombre,nombre_original:r.payload.nombre_original,cargando:null});case"SUBIR_ARCHIVO_ERROR":return g(g({},e),{},{mensaje_archivo:r.payload,cargando:null});case"CREAR_ENLACE_EXITO":return g(g({},e),{},{url:r.payload});case"LIMPIAR_STATE":return g(g({},e),{},{mensaje_archivo:null,nombre:"",nombre_original:"",cargando:null,descargas:1,password:"",autor:null,url:""});case"AGREGAR_PASSWORD":return g(g({},e),{},{password:r.payload});case"AGREGAR_DESCARGAS":return g(g({},e),{},{descargas:r.payload});default:return e}},A=n.a.createElement,v=function(e){var r=e.children,a=Object(t.useReducer)(_,{mensaje_archivo:null,nombre:"",nombre_original:"",cargando:null,descargas:1,password:"",autor:null,url:""}),n=a[0],o=a[1],s=function(){var e=Object(u.a)(c.a.mark((function e(r,a){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o({type:"SUBIR_ARCHIVO"}),e.prev=1,e.next=4,O.a.post("/api/archivos",r);case 4:t=e.sent,console.log(t.data),o({type:"SUBIR_ARCHIVO_EXITO",payload:{nombre:t.data.archivo,nombre_original:a}}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),o({type:"SUBIR_ARCHIVO_ERROR",payload:e.t0.response.data.msg});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(r,a){return e.apply(this,arguments)}}(),i=function(){var e=Object(u.a)(c.a.mark((function e(){var r,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={nombre:n.nombre,nombre_original:n.nombre_original,descargas:n.descargas,password:n.password,autor:n.autor},e.prev=1,e.next=4,O.a.post("/api/enlaces",r);case 4:a=e.sent,o({type:"CREAR_ENLACE_EXITO",payload:a.data.msg}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}();return A(b.a.Provider,{value:{mensaje_archivo:n.mensaje_archivo,nombre:n.nombre,nombre_original:n.nombre_original,cargando:n.cargando,descargas:n.descargas,password:n.password,autor:n.autor,url:n.url,mostrarAlerta:function(e){o({type:"MOSTRAR_ALERTA",payload:e}),setTimeout((function(){o({type:"OCULTAR_ALERTA"})}),3e3)},subirArchivo:s,crearEnlace:i,limpiarState:function(){o({type:"LIMPIAR_STATE"})},agregarPassword:function(e){o({type:"AGREGAR_PASSWORD",payload:e})},agregarDescargas:function(e){o({type:"AGREGAR_DESCARGAS",payload:e})}}},r)},E=n.a.createElement;r.default=function(e){var r=e.Component,a=e.pageProps;return E(y,null,E(v,null,E(r,a)))}},"8JUI":function(e,r,a){"use strict";var t=a("q1tI"),n=Object(t.createContext)();r.a=n},"9Iqy":function(e,r,a){"use strict";var t=a("q1tI"),n=Object(t.createContext)();r.a=n},GcxT:function(e,r,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/_app",function(){return a("1TCz")}])}},[[0,0,2,1,4]]]);